<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="robots" content="noindex, nofollow">
    <title>Hook Shot - Heritage Arcade</title>
    <style>
        :root { --gold: #d4af37; --orange: #FF8C00; --red: #ff4444; }
        body { background: #0f1a15; color: var(--gold); text-align: center; margin: 0; overflow: hidden; font-family: 'Georgia', serif; touch-action: none; }
        .ui { position: fixed; top: 0; width: 100%; padding: 10px; background: rgba(0,0,0,0.85); font-weight: bold; z-index: 10; display: flex; justify-content: space-around; border-bottom: 2px solid var(--gold); font-size: 1.1rem; }
        canvas { display: block; background: radial-gradient(circle, #1a3c31 0%, #0f1a15 100%); touch-action: none; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); flex-direction: column; justify-content: center; align-items: center; z-index: 100; }
        .btn { background: var(--gold); color: #000; padding: 15px 40px; border: none; font-weight: bold; margin: 10px; text-decoration: none; border-radius: 5px; cursor: pointer; text-transform: uppercase; }
        #timer { color: #fff; }
        .out-of-time { color: var(--red) !important; animation: blink 0.5s infinite; }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body>

    <div class="ui">
        <div>‚è±Ô∏è <span id="timer">30</span>s</div>
        <div>Score: <span id="sc">0</span></div>
        <div>üëï <span id="am">5</span></div>
    </div>
    
    <canvas id="gameCanvas"></canvas>

    <div id="ov" class="overlay">
        <h1 id="overTitle" style="color:var(--red); font-size: 3rem; margin-bottom: 0;">GAME OVER</h1>
        <h2 id="finalScore" style="color:white; margin-top: 10px;"></h2>
        <button class="btn" onclick="location.reload()">Play Again</button>
        <a href="index.html" class="btn" style="background:#eee">Exit Arcade</a>
    </div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const shirtImg = new Image(); shirtImg.src = "shirt.png";

        let score = 0, ammo = 5, timeLeft = 30, isGameOver = false;
        let targets = [], hooks = [], playerX = 200;

        // Timer Logic
        const countdown = setInterval(() => {
            if (isGameOver) { clearInterval(countdown); return; }
            timeLeft--;
            document.getElementById("timer").innerText = timeLeft;
            if (timeLeft <= 5) document.getElementById("timer").classList.add("out-of-time");
            if (timeLeft <= 0) endGame("TIME UP!");
        }, 1000);

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            playerX = canvas.width / 2;
        }
        window.addEventListener('resize', resize);
        resize();

        class Target {
            constructor() {
                this.x = Math.random() * (canvas.width - 60) + 30;
                this.y = -40;
                this.speed = 2 + Math.random() * 3;
                this.type = Math.random() > 0.35 ? 'present' : 'coal';
                this.char = this.type === 'present' ? 'üéÅ' : 'ü™®';
                this.size = 35;
            }
            update() { this.y += this.speed; }
            draw() {
                ctx.font = `${this.size}px Arial`;
                ctx.textAlign = "center";
                ctx.fillText(this.char, this.x, this.y);
            }
        }

        class Hook {
            constructor(x) {
                this.x = x;
                this.y = canvas.height - 100;
                this.speed = 15;
            }
            update() { this.y -= this.speed; }
            draw() {
                ctx.strokeStyle = "#FF8C00"; // Bright Orange
                ctx.lineWidth = 5;
                ctx.lineCap = "round";
                ctx.beginPath();
                ctx.moveTo(this.x, this.y);
                ctx.lineTo(this.x, this.y + 20);
                ctx.stroke();
            }
        }

        function update() {
            if (isGameOver) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw Launcher
            ctx.drawImage(shirtImg, playerX - 35, canvas.height - 100, 70, 70);

            // Hooks
            for (let i = hooks.length - 1; i >= 0; i--) {
                hooks[i].update();
                hooks[i].draw();
                if (hooks[i].y < -20) hooks.splice(i, 1);
            }

            // Targets
            if (Math.random() < 0.035) targets.push(new Target());
            for (let i = targets.length - 1; i >= 0; i--) {
                let t = targets[i];
                t.update();
                t.draw();

                for (let j = hooks.length - 1; j >= 0; j--) {
                    let h = hooks[j];
                    let dist = Math.hypot(t.x - h.x, t.y - h.y);
                    if (dist < 25) {
                        if (t.type === 'present') {
                            score += 50;
                        } else {
                            score = Math.max(0, score - 100);
                            ammo--;
                            document.getElementById("am").innerText = ammo;
                            if (ammo <= 0) { endGame("OUT OF SHIRTS!"); return; }
                        }
                        document.getElementById("sc").innerText = score;
                        targets.splice(i, 1);
                        hooks.splice(j, 1);
                        break;
                    }
                }
                if (t.y > canvas.height + 50) targets.splice(i, 1);
            }
            requestAnimationFrame(update);
        }

        function endGame(reason) {
            isGameOver = true;
            document.getElementById("ov").style.display = "flex";
            document.getElementById("overTitle").innerText = reason;
            document.getElementById("finalScore").innerText = "Final Score: " + score;
        }

        function handleInput(e) {
            if (isGameOver) return;
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            playerX = clientX;
            hooks.push(new Hook(playerX));
            e.preventDefault();
        }

        canvas.addEventListener("touchstart", handleInput, {passive: false});
        canvas.addEventListener("mousedown", handleInput);

        shirtImg.onload = update;
    </script>
</body>
</html>
