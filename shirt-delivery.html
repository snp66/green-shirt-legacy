<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="robots" content="noindex, nofollow">
    <title>Surprise Delivery</title>
    <style>
        :root { --gold: #d4af37; --deep-green: #0f1a15; --cream: #f4f1ea; }
        body { background: var(--deep-green); color: var(--gold); text-align: center; font-family: sans-serif; margin: 0; overflow: hidden; touch-action: none; }
        
        /* Landscape Warning Overlay */
        #landscape-warning {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--deep-green);
            z-index: 999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #landscape-warning img { width: 80px; margin-bottom: 20px; animation: rotate 2s infinite; }
        @keyframes rotate { 0% { transform: rotate(0deg); } 50% { transform: rotate(-90deg); } 100% { transform: rotate(0deg); } }

        /* Show warning only in portrait mode on mobile */
        @media (orientation: portrait) {
            #landscape-warning { display: flex; }
        }

        .ui { padding: 10px; font-weight: bold; font-size: 1.1rem; }
        canvas { width: 100%; max-width: 800px; height: auto; background: #2c3e50; display: block; margin: 0 auto; border-bottom: 3px solid var(--gold); }
        
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); flex-direction: column; justify-content: center; align-items: center; z-index: 100; }
        .btn { background: var(--gold); color: #000; padding: 15px 30px; border: none; font-weight: bold; margin: 10px; text-decoration: none; display: inline-block; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

    <div id="landscape-warning">
        <div style="font-size: 50px;">ðŸ“±ðŸ”„</div>
        <h2>Please Rotate Your Phone</h2>
        <p>This game is best played horizontally.</p>
    </div>

    <div class="ui">Score: <span id="sc">0</span> | Shirts Left: <span id="am">5</span></div>
    
    <canvas id="c" width="800" height="400"></canvas>

    <div id="ov" class="overlay">
        <h1 id="resTitle">DELIVERY COMPLETE</h1>
        <h2 id="finalScoreDisplay"></h2>
        <button class="btn" onclick="location.reload()">New Delivery</button>
        <a href="index.html" class="btn" style="background:#eee">Back Home</a>
    </div>

    <script>
        const canvas = document.getElementById("c"), ctx = canvas.getContext("2d");
        const shirt = new Image(); shirt.src = "shirt.png";
        let score = 0, ammo = 5, drag = false, m = {x:0, y:0};
        let p = {x:100, y:300, vx:0, vy:0, active:false}, t = {x:600, y:330, w:100, spd:2.5};

        function getTouchPos(e) {
            const r = canvas.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            return { x: (clientX - r.left) * (800 / r.width), y: (clientY - r.top) * (400 / r.height) };
        }

        function update() {
            ctx.clearRect(0,0,800,400);
            // Ground
            ctx.fillStyle = "#1a3c31"; ctx.fillRect(0,350,800,50);
            // Target
            ctx.fillStyle = "#e67e22"; ctx.fillRect(t.x, t.y, t.w, 20);
            t.x += t.spd; if(t.x > 680 || t.x < 400) t.spd *= -1;

            if(drag) { 
                ctx.beginPath(); ctx.strokeStyle="white"; ctx.setLineDash([5, 5]);
                ctx.moveTo(100,300); ctx.lineTo(m.x, m.y); ctx.stroke(); 
                ctx.setLineDash([]);
            }
            if(p.active) {
                p.vy += 0.25; p.x += p.vx; p.y += p.vy;
                if(p.y > 330) {
                    if(p.x > t.x && p.x < t.x + t.w) { score += 100; document.getElementById("sc").innerText = score; }
                    p.active = false; ammo--; document.getElementById("am").innerText = ammo;
                    if(ammo <= 0) {
                        document.getElementById("ov").style.display = "flex";
                        document.getElementById("finalScoreDisplay").innerText = "Total Score: " + score;
                    }
                }
            }
            ctx.drawImage(shirt, p.x-25, p.y-25, 50, 50);
            requestAnimationFrame(update);
        }

        // Input Listeners
        canvas.addEventListener("touchstart", e => { if(!p.active && ammo > 0) drag = true; m = getTouchPos(e); e.preventDefault(); }, {passive: false});
        canvas.addEventListener("touchmove", e => { if(drag) m = getTouchPos(e); e.preventDefault(); }, {passive: false});
        canvas.addEventListener("touchend", () => { if(drag) { p.active=true; p.x=100; p.y=300; p.vx=(100-m.x)*0.15; p.vy=(300-m.y)*0.15; drag=false; } });
        
        canvas.addEventListener("mousedown", e => { if(!p.active && ammo > 0) drag = true; m = getTouchPos(e); });
        window.addEventListener("mousemove", e => { if(drag) m = getTouchPos(e); });
        window.addEventListener("mouseup", () => { if(drag) { p.active=true; p.x=100; p.y=300; p.vx=(100-m.x)*0.15; p.vy=(300-m.y)*0.15; drag=false; } });
        
        shirt.onload = update;
    </script>
</body>
</html>
